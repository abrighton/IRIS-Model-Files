subsystem = IRIS
component = oiwfs-poa-assembly

publish {

  events     = [
    {
      name              = POS_state
      description       = "Probe position functional group state" 
      maxRate = 20
      attributes = [
        {
          name          = cmd
          description   = "command state"
          enum          = [UNINITIALIZED,READY,BUSY,CONTINUOUS]
        }
        {
          name          = rtheta1_move
          description   = "state of oiwfs1 r-theta mechanism motion"
          enum          = [STOPPED,MOVING]
        }
        {
          name          = rtheta1_onTarget
          description   = "oiwfs1 r-theta onTarget flag"
          type          = boolean
        }
        {
          name          = rtheta2_move
          description   = "state of oiwfs2 r-theta mechanism motion"
          enum          = [STOPPED,MOVING]
        }
        {
          name          = rtheta2_onTarget
          description   = "oiwfs2 r-theta onTarget flag"
          type          = boolean
        }
        {
          name          = rtheta3_move
          description   = "state of oiwfs3 r-theta mechanism motion"
          enum          = [STOPPED,MOVING]
        }
        {
          name          = rtheta3_onTarget
          description   = "oiwfs3 r-theta onTarget flag"
          type          = boolean
        }        
        {
          name          = collimator1_move
          description   = "state of oiwfs1 collimator mechanism motion"
          enum          = [STOPPED,MOVING]
        }
        {
          name          = collimator1_onTarget
          description   = "oiwfs1 collimator onTarget flag"
          type          = boolean
        }
        {
          name          = collimator2_move
          description   = "state of oiwfs2 collimator mechanism motion"
          enum          = [STOPPED,MOVING]
        }
        {
          name          = collimator2_onTarget
          description   = "oiwfs2 collimator onTarget flag"
          type          = boolean
        }
        {
          name          = collimator3_move
          description   = "state of oiwfs3 collimator mechanism motion"
          enum          = [STOPPED,MOVING]
        }
        {
          name          = collimator3_onTarget
          description   = "oiwfs3 collimator onTarget flag"
          type          = boolean
        }        
        {
          name          = trombone1_move
          description   = "state of oiwfs1 trombone mechanism motion"
          enum          = [STOPPED,MOVING]
        }
        {
          name          = trombone1_onTarget
          description   = "oiwfs1 trombone onTarget flag"
          type          = boolean
        }
        {
          name          = trombone2_move
          description   = "state of oiwfs2 trombone mechanism motion"
          enum          = [STOPPED,MOVING]
        }
        {
          name          = trombone2_onTarget
          description   = "oiwfs2 trombone onTarget flag"
          type          = boolean
        }
        {
          name          = trombone3_move
          description   = "state of oiwfs3 trombone mechanism motion"
          enum          = [STOPPED,MOVING]
        }
        {
          name          = trombone3_onTarget
          description   = "oiwfs3 trombone onTarget flag"
          type          = boolean
        }        
      ]
    }
    {
      name            = POS_cmdStatus
      description     = "Probe position functional group command status"
      attributes      = [
        {
          name        = cmd
          description = "Current command state"
          enum        = [ UNINITIALIZED, READY, BUSY, CONTINUOUS ]
        }
      ]
    }
    {
      name              = POS_target
      maxRate = 20
      description       = "Probe position functional group targets in FCRS<sub>IRIS-ROT</sub>" 
      attributes        = [
        {
          name          = xy1
          description   = "2-element array holding x,y values"
          type          = array
          dimensions: [2]
          units         = mm
          items = {
            type = double
          }
        }
        {
          name          = trackID1
          description   = "Unique TCS target ID that is incremented (with rollover) each time the TCS is instructed to move to a new target."
          type          = long
        }
        {
          name          = xy2
          description   = "2-element array holding x,y values"
          type          = array
          dimensions: [2]
          units         = mm
          items = {
            type = double
          }
        }
        {
          name          = trackID2
          description   = "Unique TCS target ID that is incremented (with rollover) each time the TCS is instructed to move to a new target."
          type          = long
        }
        {
          name          = xy3
          description   = "2-element array holding x,y values"
          type          = array
          dimensions: [2]
          units         = mm
          items = {
            type = double
          }
        }
        {
          name          = trackID3
          description   = "Unique TCS target ID that is incremented (with rollover) each time the TCS is instructed to move to a new target."
          type          = long
        }
        {
          name          = trombone1
          description   = "trombone1 target"
          type          = double
          units         = mm
        }
        {
          name          = trombone2
          description   = "trombone2 target"
          type          = double
          units         = mm
        }
        {
          name          = trombone3
          description   = "trombone3 target"
          type          = double
          units         = mm
        }
        {
          name          = collimator1
          description   = "collimator1 target"
          type          = double
          units         = mm
        }
        {
          name          = collimator2
          description   = "collimator2 target"
          type          = double
          units         = mm
        }
        {
          name          = collimator3
          description   = "collimator3 target"
          type          = double
          units         = mm
        }
      ]
    }
    {
      name              = POS_current
      maxRate = 20
      description       = "Probe position functional group current location in FCRS<sub>IRIS-ROT</sub>" 
      attributes        = [
        {
          name          = xy1
          description   = "2-element array holding x,y values"
          type          = array
          dimensions: [2]
          units         = mm
          items = {
            type = double
          }
        }
        {
          name          = xy2
          description   = "2-element array holding x,y values"
          type          = array
          dimensions: [2]
          units         = mm
          items = {
            type = double
          }
        }
        {
          name          = xy3
          description   = "2-element array holding x,y values"
          type          = array
          dimensions: [2]
          units         = mm
          items = {
            type = double
          }
        }
        {
          name          = xy1_error
          description   = "2-element array holding x,y values"
          type          = array
          dimensions: [2]
          units         = mm
          items = {
            type = double
          }
        }
        {
          name          = xy2_error
          description   = "2-element array holding x,y values"
          type          = array
          dimensions: [2]
          units         = mm
          items = {
            type = double
          }
        }
        {
          name          = xy3_error
          description   = "2-element array holding x,y values"
          type          = array
          dimensions: [2]
          units         = mm
          items = {
            type = double
          }
        }
        {
          name          = trombone1
          description   = "trombone1 current"
          type          = double
          units         = mm
        }
        {
          name          = trombone2
          description   = "trombone2 current"
          type          = double
          units         = mm
        }
        {
          name          = trombone3
          description   = "trombone3 current"
          type          = double
          units         = mm
        }
        {
          name          = trombone1_error
          description   = "trombone1 error"
          type          = double
          units         = mm
        }
        {
          name          = trombone2_error
          description   = "trombone2 error"
          type          = double
          units         = mm
        }
        {
          name          = trombone3_error
          description   = "trombone3 error"
          type          = double
          units         = mm
        }
        {
          name          = collimator1
          description   = "collimator1 current"
          type          = double
          units         = mm
        }
        {
          name          = collimator2
          description   = "collimator2 current"
          type          = double
          units         = mm
        }
        {
          name          = collimator3
          description   = "collimator3 current"
          type          = double
          units         = mm
        }
        {
          name          = collimator1_error
          description   = "collimator1 error"
          type          = double
          units         = mm
        }
        {
          name          = collimator2_error
          description   = "collimator2 error"
          type          = double
          units         = mm
        }
        {
          name          = collimator3_error
          description   = "collimator3 error"
          type          = double
          units         = mm
        }
      ]
    }

    {
      name              = POS_trackingType
      maxRate           = 0.1
      description       = "Tracking/dither type for each OIWFS"
      attributes = [
        {
          name          = trackingType1
          description   = "type for Probe 1"
          enum          = [TRACK_POA, TRACK_ON_CHIP, DITHER_POA, DITHER_ON_CHIP]
        }
        {
          name          = trackingType2
          description   = "type for Probe 2"
          enum          = [TRACK_POA, TRACK_ON_CHIP, DITHER_POA, DITHER_ON_CHIP]
        }
        {
          name          = trackingType3
          description   = "type for Probe 3"
          enum          = [TRACK_POA, TRACK_ON_CHIP, DITHER_POA, DITHER_ON_CHIP]
        }
      ]
    }

    {
      name              = MODE_state
      description       = "Probe mode functional group state" 
      maxRate = 20
      attributes = [
        {
          name          = cmd
          description   = "command state"
          enum          = [UNINITIALIZED,READY,BUSY,CONTINUOUS]
        }
        {
          name          = mode1_move
          description   = "state of oiwfs1 mode mechanism motion"
          enum          = [STOPPED,MOVING]
        }
        {
          name          = mode1_onTarget
          description   = "oiwfs1 mode onTarget flag"
          type          = boolean
        }
        {
          name          = mode2_move
          description   = "state of oiwfs2 mode mechanism motion"
          enum          = [STOPPED,MOVING]
        }
        {
          name          = mode2_onTarget
          description   = "oiwfs2 mode onTarget flag"
          type          = boolean
        }
        {
          name          = mode3_move
          description   = "state of oiwfs3 mode mechanism motion"
          enum          = [STOPPED,MOVING]
        }
        {
          name          = mode3_onTarget
          description   = "oiwfs3 mode onTarget flag"
          type          = boolean
        }        
      ]
    }
    {
      name            = MODE_cmdStatus
      description     = "Probe mode functional group command status"
      attributes      = [
        {
          name        = cmd
          description = "Current command state"
          enum        = [ UNINITIALIZED, READY, BUSY, CONTINUOUS ]
        }
      ]
    }
  ]
}