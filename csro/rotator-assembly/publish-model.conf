subsystem = IRIS
component = rotator-assembly

publish {

  telemetry = [
    {
      name              = state
      description       = "Rotator state" 
      minRate = 1
      maxRate = 1
      attributes = [
        {
          name          = cmd
          description   = "command state"
          enum          = [UNINITIALIZED,READY,BUSY,CONTINUOUS]
        }
        {
          name          = move
          description   = "state of rotator motion"
          enum          = [STOPPED,MOVING]
        }
        {
          name          = onTarget
          description   = "Rotator onTarget flag"
          type          = boolean
        }
      ]
    }
    {
      name            = cmdStatus
      description     = "Rotator command status"
      attributes      = [
        {
          name        = cmd
          description = "Current command state"
          enum        = [ UNINITIALIZED, READY, BUSY, CONTINUOUS ]
        }
      ]
    }
    {
      name              = target
      minRate = 1
      maxRate = 1
      description       = "Rotator target angle in FCRS<sub>IRIS</sub>" 
      attributes        = [
        {
          name          = instrumentAngle
          description   = "Rotator angle"
          type          = double
          minimum       = -135
          maximum       = 135
          units         = degrees
        }
        {
          name          = counter
          description   = "Unique TCS target counter that is incremented (with rollover) each time a new target is acquired. TBD whether this is required."
          type          = long
        }
      ]
    }
    {
      name              = current
      minRate = 1
      maxRate = 1
      description       = "Rotator current angle in FCRS<sub>IRIS</sub>" 
      attributes        = [
        {
          name          = instrumentAngle
          description   = "Rotator angle"
          type          = double
          minimum       = -135
          maximum       = 135
          units         = degrees
        }
        {
          name          = error
          description   = "Error in rotator angle"
          type          = double
          units         = degrees
        }
      ]
    }
  ]
}
