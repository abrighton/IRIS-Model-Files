subsystem = IRIS
component = sci-adc-assembly

publish {

  description = "Telemetries published by IRIS Science Path ADC Assembly."


  telemetry = [
    {
      name = status
      description = "Current/Target ADC status"
      minRate = 1
      maxRate = 1
      archive = true
      archiveRate = 1
      attributes = [
        {
          name = currentOrientation
          description  = "Current orientation of ADC"
          type = float
          default = 0
          units = TBD
        }
        {
           name = currentPower
           description  = "Current power of ADC"
           type = float
           default = 0
           units = TBD
        }
        {
           name = currentWavelength
           description  = "Current wavelength corrected by ADC"
           type = float
           units = microns
        }
        {
           name = targetOrientation
           description  = "Target orientation of ADC"
           type = float
           default = 0
           units = TBD
        }
        {
           name = targetPower
           description  = "Target power of ADC"
           type = float
           default = 0
           units = TBD
        }
        {
           name = targetWavelength
           description  = "Target wavelength corrected by ADC"
           type = float
           units = microns
        }
        {
           name = state
           description  = """
Current overall state of ADC. Meaning of each value is as follows:  

* __Init:Loaded__         : __TODO__ fill out this item
* __Init:Initilizing__    : __TODO__ fill out this item
* __Init:Uninitializing__ : __TODO__ fill out this item
* __Init:Initialized__    : __TODO__ fill out this item
* __Init:Connecting__     : __TODO__ fill out this item
* __Init:Shutdown__       : __TODO__ fill out this item
* __Init:Running__        : __TODO__ fill out this item
* __Datum:Datuming__      : __TODO__ fill out this item
* __Datum:Braking__       : __TODO__ fill out this item
* __Datum:Paused__        : __TODO__ fill out this item
* __Datum:Error__         : __TODO__ fill out this item
* __Lock:Locking__        : __TODO__ fill out this item
* __Lock:Braking__        : __TODO__ fill out this item
* __Lock:Paused__         : __TODO__ fill out this item
* __Lock:Locked__         : __TODO__ fill out this item
* __Lock:Error__          : __TODO__ fill out this item
* __Park:Parking__        : __TODO__ fill out this item
* __Park:Braking__        : __TODO__ fill out this item
* __Park:Paused__         : __TODO__ fill out this item
* __Park:Parked__         : __TODO__ fill out this item
* __Park:Error__          : __TODO__ fill out this item
* __In:Following__        : __TODO__ fill out this item
* __In:Rotating__         : __TODO__ fill out this item
* __In:InsertedRotating__ : __TODO__ fill out this item
* __In:Braking__          : __TODO__ fill out this item
* __In:Ready__            : __TODO__ fill out this item
* __In:FollowingError__   : __TODO__ fill out this item
* __In:Error__            : __TODO__ fill out this item
* __Out:Retructing__      : __TODO__ fill out this item
* __Out:Inserting__       : __TODO__ fill out this item
* __Out:Braking__         : __TODO__ fill out this item
* __Out:Paused__          : __TODO__ fill out this item
* __Out:Retructed__       : __TODO__ fill out this item
* __Out:Error__           : __TODO__ fill out this item
* __Off:PoweringOff__     : __TODO__ fill out this item
* __Off:PoweredOff__      : __TODO__ fill out this item
* __Off:Error__           : __TODO__ fill out this item
"""
           type = string
        }
        {
           name = errorMessage
           description  = "Error message."
           type = string
        }
      ]
    }
    {
      name = prism1Axis
      description = "Prism 1 axis"
      minRate = 1
      maxRate = 1
      archive = true
      archiveRate = 1
      attributes = [
        {
          name = position
          description  = "Current position of prism 1 axis. Home position is 0."
          type = float
          units = degree
          minimum = 0
        }
        {
          name = rawPosition
          description  = "Current raw position of prism 1 axis."
          type = integer
          units = counts 
          minimum = 0
          default = -1 
        }
        {
          name = homeSwitch
          description = "Current home switch state of prism 1 axis." 
          type = boolean
          default = false
        }
        {
          name = targetPosition
          description  = "Target position of prism 1 axis. Home position is 0."
          type = float
          units = degree
          minimum = 0
          default = -1 
        }
        {
          name = targetRawPosition
          description  = "Target raw position of prism 1 axis."
          type = integer
          units = counts 
          minimum = 0
          default = -1 
        }
        {
          name = status
          description  = """
Current status of prism 1 axis. Meaning of each value is as follows:  

* **INIT**   : Initial status right after the power of motion controller is turned on.  
* **HOMING** : Moving to home position.  
* **HOME**   : At home position (when homing fails, it goes to ERROR).  
* **PARKING**: Moving to park position.  
* **PARK**   : At park position. (This might be the same as HOME, TBD)  
* **MOVING** : Moving to the target position.  
* **TARGET** : At the target position.  
* **PAUSE**  : Motion was interrupted and stopped.  
* **ERROR**  : Error happened.
"""
          enum = [HOMING, HOME, PARKING, PARK, MOVING, STOP, ERROR, UNKNOWN]
        }
        {
          name = errorMessage
          description  = "Error message."
          type = string
        }
      ]
    }
    {
      name = prism2Axis
      description = "Prism 2 axis"
      minRate = 1
      maxRate = 1
      archive = true
      archiveRate = 1
      attributes = [
        {
          name = position
          description  = "Current position of prism 2 axis. Home position is 0."
          type = float
          units = degree
          minimum = 0
        }
        {
          name = rawPosition
          description  = "Current raw position of prism 2 axis."
          type = integer
          units = counts 
          minimum = 0
          default = -1 
        }
        {
          name = homeSwitch
          description = "Current home switch state of prism 2 axis." 
          type = boolean
          default = false
        }
        {
          name = targetPosition
          description  = "Target position of prism 2 axis. Home position is 0."
          type = float
          units = degree
          minimum = 0
          default = -1 
        }
        {
          name = targetRawPosition
          description  = "Target raw position of prism 2 axis."
          type = integer
          units = counts 
          minimum = 0
          default = -1 
        }
        {
          name = status
          description  = """
Current status of prism 2 axis. Meaning of each value is as follows:  

* **INIT**   : Initial status right after the power of motion controller is turned on.  
* **HOMING** : Moving to home position.  
* **HOME**   : At home position (when homing fails, it goes to ERROR).  
* **PARKING**: Moving to park position.  
* **PARK**   : At park position. (This might be the same as HOME, TBD)  
* **MOVING** : Moving to the target position.  
* **TARGET** : At the target position.  
* **PAUSE**  : Motion was interrupted and stopped.  
* **ERROR**  : Error happened.
"""
          enum = [HOMING, HOME, PARKING, PARK, MOVING, STOP, ERROR, UNKNOWN]
        }
        {
          name = errorMessage
          description  = "Error message."
          type = string
        }
      ]
    }
    {
      name = retructionAxis
      description = "Retruction Axis"
      minRate = 1
      maxRate = 1
      archive = true
      archiveRate = 1
      attributes = [
        {
          name = positionStatus
          description = "Summary of the retruction axis."
	  enum = [IN, HALFWAY, OUT, UNKNOWN]
        }
        {
          name = position
          description  = """
Current position of the retruction axis. Home position is 0.

__TODO__: Define maximum and minimum value.
"""
          type = float
          units = mm
        }
        {
          name = targetPosition
          description  = """
Demanded position of the retruction axis. Home position is 0.

__TODO__: Define maximum and minimum value.
"""
          type = float
          units = mm
        }
        {
          name = rawPosition
          description  = """
Current raw position of the retruction axis.

__TODO__: Define maximum and minimum value.
"""
          type = integer
          units = counts 
        }
        {
          name = targetRawPosition
          description  = """
Demanded raw position of the retruction axis.

__TODO__: Define maximum and minimum value.
"""
          type = integer
          units = counts
        }
        {
          name = retructedSwitch
          description = "Current status of retruction position switch."
          type = boolean
        }
        {
          name = insertedSwitch
          description = "Current status of inserted position switch."
          type = boolean
        }
        {
          name = positionOffset
          description = "Position offset of actual inserted position from the inserted switch."
          type = float
	  units = mm
        }
        {
          name = rawPositionOffset
          description = "Raw position offset of actual inserted position from the inserted switch."
          type = integer
	  units = counts
        }
      ]
    }
  ]
}
